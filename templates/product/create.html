{% extends 'base.html' %}

{% block content %}
  <script>
    $(function () {
        window.category_queue.push(function () {$.each(window.categories, function (index, element) {
          $("#first_category").append($('<option>', {'value': index, 'text': index}));
          change_second_category($("#first_category").val());
        })});
      });
    function change_second_category(index) {
      $("#second_category").empty();
      $.each(window.categories[index], function (index, element) {
        $("#second_category").append($('<option>', {'value': element[0], 'text': element[1]}));
      });
    }
  </script>
    <!-- Page Features -->
    <!-- Product Area -->
    <h2 class="text-center">New Product</h2><br>

    <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
    <div>
        <table width="80%">
          <tr>
            <th scope="row"><label for="reg_product_name">Title </label></th>
            <td width="70%">
              <input type="text" name="title" value="" id="reg_product_name" required>
            </td>
          </tr>
          <!-- /content name -->
          <tr>
            <th scope="row"><label for="reg_category">Category</label></th>
            <td>
              <select id="first_category" onchange="change_second_category($(this).val())">
              </select>
            </td>
            <td>
              <select id="second_category" name="category">
              </select>
            </td>
          </tr>
          <!-- /category -->
          <tr>
            <th scope="row"><label for="reg_content">Content</label></th>
            <td>
              <textarea rows=4 cols=50 name="content"></textarea>
            </td>
          </tr>
          <!-- /content -->
          <tr>
            <th scope="row"><label for="reg_thumbnail">Thumbnail</label></th>
            <td>
              <input type="file" name="img" value="" id="reg_thumbnail" accept="image/*">
            </td>
          </tr>
          <!-- /thumbnail -->
          <tr>
            <th scope="row"><label for="reg_one_line_introduce">One-line Introduce&nbsp;&nbsp;</label></th>
            <td>
              <input type="text" name="one_line_introduce" value="" id="reg_one_line_introduce" required>
            </td>
          </tr>

          <!-- /one line introduce -->

          <tr>
            <th scope="row"><label for="reg_as_rule">After-Sales Service</label></th>
            <td>
              <input type="text" name="as_rule" value="" id="reg_as_rule" required>
            </td>
          </tr>

          <!-- /as rule -->

          <tr>
            <th scope="row"><label for="reg_refund_rule">Refund Policy</label></th>
            <td>
              <input type="text" name="refund_rule" value="" id="reg_refund_rule" required>
            </td>
          </tr>

          <!-- /refund rule-->
        </table>

    </div>

    <div class="mt-5" style="text-align: center;">
      <input type="submit" name="submit" value="Create" class="btn btn-primary">
    </div>
    </form>
  <!-- /.container -->
{% endblock %}
